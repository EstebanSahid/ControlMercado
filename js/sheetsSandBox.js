/* Inicio SandBox */

let dataSandBox = [
    [
        "2",
        "ACELGAS "
      ],
      [
        "3",
        "AJETES"
      ],
      [
        "4",
        "AJOS EXTRAS"
      ],
      [
        "5",
        "AJOS BOLSA 1ª"
      ],
      [
        "6",
        "AJOS BOLSA 2ª"
      ],
      [
        "7",
        "ALCACHOFA EXTRA"
      ],
      [
        "8",
        "ALCACHOFA"
      ],
      [
        "9",
        "APIO"
      ],
      [
        "10",
        "APIO RAIZ"
      ],
      [
        "11",
        "BATATA"
      ],
      [
        "12",
        "BERENJENA EXTRA"
      ],
      [
        "13",
        "BERENJENA"
      ],
      [
        "14",
        "BROCOLI"
      ],
      [
        "15",
        "CALABAZA"
      ],
      [
        "16",
        "CALABAZA ADORNO"
      ],
      [
        "17",
        "CALABACIN EXTRA"
      ],
      [
        "18",
        "CALABACIN 1ª"
      ],
      [
        "19",
        "CALABACIN"
      ],
      [
        "20",
        "CEBOLLA"
      ],
      [
        "21",
        "CEBOLLA DULCE"
      ],
      [
        "22",
        "CEBOLLA MORADA"
      ],
      [
        "26",
        "CEBOLLETA"
      ],
      [
        "28",
        "COLES DE BRUSELAS"
      ],
      [
        "29",
        "COLIFLOR EXTRA"
      ],
      [
        "30",
        "COLIFLOR"
      ],
      [
        "31",
        "CHAMPIÑON EXTRA"
      ],
      [
        "33",
        "ENDIVIAS"
      ],
      [
        "34",
        "ESCAROLA PIEZA"
      ],
      [
        "35",
        "ESPARRAGOS"
      ],
      [
        "37",
        "ESPINACAS"
      ],
      [
        "39",
        "ENSALADA GOURM. BOLSA"
      ],
      [
        "40",
        "GUINDILLA SECA"
      ],
      [
        "41",
        "GUINDILLA VERDE"
      ],
      [
        "42",
        "GRELOS"
      ],
      [
        "43",
        "HABAS"
      ],
      [
        "44",
        "JUDIAS VERDES EXTRA"
      ],
      [
        "45",
        "JUDIAS VERDES"
      ],
      [
        "46",
        "JUDIAS BOBY"
      ],
      [
        "47",
        "LECHUGA BATAVIA"
      ],
      [
        "49",
        "LECHUGA COGOLLOS"
      ],
      [
        "50",
        "LECHUGA ICEBERG"
      ],
      [
        "51",
        "LECHUGA ICEBERG 2 PIEZAS"
      ],
      [
        "52",
        "LECHUGA HOJA DE ROBLE"
      ],
      [
        "53",
        "LECHUGA ROMANA "
      ],
      [
        "54",
        "LECHUGA ROMANA 2 PIEZAS"
      ],
      [
        "55",
        "LIMON EXTRA"
      ],
      [
        "56",
        "LIMON 1ª"
      ],
      [
        "57",
        "LIMON"
      ],
      [
        "58",
        "LIMON BOLSA"
      ],
      [
        "60",
        "LIMA"
      ],
      [
        "61",
        "LOMBARDA"
      ],
      [
        "62",
        "MAIZ DULCE"
      ],
      [
        "63",
        "NABOS"
      ],
      [
        "64",
        "PATATA"
      ],
      [
        "65",
        "PATATA NUEVA"
      ],
      [
        "66",
        "PATATA LAVADA"
      ],
      [
        "68",
        "PATATA BOLSA 2,5 KG"
      ],
      [
        "69",
        "PATATA BOLSA 10 KG"
      ],
      [
        "70",
        "PATATA ROJA"
      ],
      [
        "71",
        "PATATA AGRIA"
      ],
      [
        "76",
        "PEPINOS EXTRA"
      ],
      [
        "77",
        "PEPINOS"
      ],
      [
        "78",
        "PIMIENTO VERDE EXTRA"
      ],
      [
        "79",
        "PIMIENTO VERDE"
      ],
      [
        "81",
        "PIMIENTO ITALIANO EXTRA"
      ],
      [
        "82",
        "PIMIENTO ITALIANO"
      ],
      [
        "84",
        "PIMIENTO ROJO EXTRA"
      ],
      [
        "85",
        "PIMIENTO ROJO LAMUYO"
      ],
      [
        "86",
        "PIMIENTO ROJO CALIFORNIA"
      ],
      [
        "87",
        "PIMIENTO PADRON"
      ],
      [
        "88",
        "PIMIENTO PADRON BOLSA"
      ],
      [
        "89",
        "PUERROS"
      ],
      [
        "90",
        "RABANITOS"
      ],
      [
        "91",
        "REMOLACHA MANOJO"
      ],
      [
        "92",
        "REMOLACHA CRUDA BOLSA"
      ],
      [
        "93",
        "REMOLACHA COCIDA"
      ],
      [
        "94",
        "REPOLLO RISADO"
      ],
      [
        "95",
        "SETAS"
      ],
      [
        "96",
        "SETAS DE CARDO"
      ],
      [
        "97",
        "SETAS BOLETUS"
      ],
      [
        "98",
        "SETAS NISCALOS"
      ],
      [
        "99",
        "REPOLLO LISO "
      ],
      [
        "100",
        "TOMATE DE ENSALADA EXTR"
      ],
      [
        "101",
        "TOMATE DE ENSALADA 1ª"
      ],
      [
        "102",
        "TOMATE ROJO 1ª"
      ],
      [
        "103",
        "TOMATE ROJO"
      ],
      [
        "104",
        "TOMATE CHERRY"
      ],
      [
        "105",
        "TOMATE KUMATO"
      ],
      [
        "106",
        "TOMATE PERA 1ª"
      ],
      [
        "107",
        "TOMATE PERA"
      ],
      [
        "108",
        "TOMATE RAMA 1ª"
      ],
      [
        "109",
        "TOMATE RAMA"
      ],
      [
        "110",
        "TOMATE RAFF"
      ],
      [
        "111",
        "TOMATE ROSA"
      ],
      [
        "112",
        "ZANAHORIA"
      ],
      [
        "113",
        "YUCA"
      ],
      [
        "150",
        "HINOJO"
      ],
      [
        "151",
        "ALBAHACA"
      ],
      [
        "152",
        "CEBOLLINO"
      ],
      [
        "153",
        "CILANTRO"
      ],
      [
        "154",
        "ENELDO"
      ],
      [
        "155",
        "ESTRAGON"
      ],
      [
        "157",
        "HIERBABUENA"
      ],
      [
        "158",
        "LAUREL"
      ],
      [
        "159",
        "LAUREL BOLSA"
      ],
      [
        "160",
        "MENTA"
      ],
      [
        "161",
        "ÑORAS"
      ],
      [
        "162",
        "OREGANO"
      ],
      [
        "163",
        "PEREJIL"
      ],
      [
        "164",
        "PEREJIL RIZADO"
      ],
      [
        "165",
        "PIMIENT. SECO CHORICERO"
      ],
      [
        "166",
        "ROMERO"
      ],
      [
        "167",
        "RUCULA"
      ],
      [
        "168",
        "SALVIA"
      ],
      [
        "169",
        "TOMILLO"
      ],
      [
        "170",
        "PLANTAS EN MACETA"
      ],
      [
        "171",
        "JENGIBRE"
      ],
      [
        "291",
        "PLATANO MACHO MADURO"
      ],
      [
        "292",
        "PLATANO MACHO VERDE"
      ],
      [
        "199",
        "AGUACATE 2º"
      ],
      [
        "200",
        "AGUACATE EXTRA"
      ],
      [
        "201",
        "AGUACATE DE PRIMERA"
      ],
      [
        "202",
        "BANANA EXTRA"
      ],
      [
        "203",
        "BANANA"
      ],
      [
        "204",
        "BREVAS EXTRA NEGRA"
      ],
      [
        "205",
        "BREVAS  NEGRAS PRIMERA"
      ],
      [
        "206",
        "BREVAS NEGRAS OFERTA"
      ],
      [
        "207",
        "CHIRIMOYA EXTRA"
      ],
      [
        "208",
        "CHIRIMOYA 1ª"
      ],
      [
        "209",
        "CHIRIMOYA"
      ],
      [
        "210",
        "CLEMENTINA EXTRA"
      ],
      [
        "211",
        "CLEMENTINA 1ª"
      ],
      [
        "212",
        "CLEMENTINA"
      ],
      [
        "213",
        "CLEMENTINA OFERTA"
      ],
      [
        "214",
        "CLEMENTINA ORRY"
      ],
      [
        "215",
        "CLEMENTINA HOJA "
      ],
      [
        "216",
        "CLEMENTINA HOJA OFERTA"
      ],
      [
        "217",
        "COCO PIEZA"
      ],
      [
        "218",
        "FRAMBUESA BANDEJA"
      ],
      [
        "219",
        "FRESON EXTRA"
      ],
      [
        "220",
        "FRESON 1ª"
      ],
      [
        "221",
        "FRESON"
      ],
      [
        "222",
        "GRANADA EXTRA"
      ],
      [
        "223",
        "GRANADA"
      ],
      [
        "224",
        "HIGOS VERDE EXTRA"
      ],
      [
        "225",
        "HIGOS VERDE1ª"
      ],
      [
        "226",
        "HIGOS VERDES OFERTA"
      ],
      [
        "227",
        "KAKIS BANDEJA"
      ],
      [
        "228",
        "KIWIS EXTRA"
      ],
      [
        "229",
        "KIWIS 1ª"
      ],
      [
        "230",
        "KIWIS"
      ],
      [
        "231",
        "KIWI ORO"
      ],
      [
        "232",
        "MANGO EXTRA"
      ],
      [
        "233",
        "MANGO"
      ],
      [
        "234",
        "MANZANA FUJI EXTRA"
      ],
      [
        "235",
        "MANZANA FUJI 1ª"
      ],
      [
        "236",
        "MANZANA FUJI"
      ],
      [
        "237",
        "MANZANA GOLDEN EXTRA"
      ],
      [
        "238",
        "MANZANA GOLDEN 1"
      ],
      [
        "239",
        "MANZANA GOLDEN"
      ],
      [
        "240",
        "MANZANA GOLDEN OFERTA"
      ],
      [
        "241",
        "MANZANA GRANNY SMITH EXT"
      ],
      [
        "242",
        "MANZANA GRANNY SMITH"
      ],
      [
        "243",
        "MANZANA PINK LADY EXTRA"
      ],
      [
        "244",
        "MANZANA PINK LADY"
      ]
];

let selectedProductsSandBox = [];
//getProductsSandBox();

async function getProductsSandBox() {
    displayProductsSandBox(dataSandBox);
}
function displayProductsSandBox(data) {
    const tbody = document.getElementById("content_sandbox");
    tbody.innerHTML = '';

    if (data.length > 15) {
        document.getElementById("warning_lbl").innerText = "Utiliza el buscador para filtrar los productos";
        //document.getElementById("warning_lbl").innerText =
        document.getElementById("warning_lbl").style.visibility = "visible";
    } else if (data.length == 0) {
        document.getElementById("warning_lbl").innerText = "No se encontraron productos";
    } else {
        document.getElementById("warning_lbl").style.visibility = "Hidden";
        data.forEach((row) => {
            const tr = document.createElement("tr");
            row.forEach((cell) => {
                const td = document.createElement("td");
                td.textContent = cell;
                tr.appendChild(td);
            });

            tr.addEventListener("click", () => {
                selectedProductsSandBox.push(row);
                captureProductsSandBox(selectedProductsSandBox);
            })
            tbody.appendChild(tr);
        });
    }
}
function captureProductsSandBox(data) {
    const tbody = document.getElementById("content_orderSandBox");
    tbody.innerHTML = '';

    data.forEach((row) => {
        const tr = document.createElement("tr");

        // Crear celdas de datos
        row.forEach((cell) => {
            const td = document.createElement("td");
            td.textContent = cell;
            tr.appendChild(td);
        });

        // Crear los input
        const inputTd = document.createElement("td");
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "Cantidad"
        inputTd.appendChild(input);
        tr.appendChild(inputTd);

        tbody.appendChild(tr);
    });

    searchProductsSandBox();
}
function searchProductsSandBox() {
    const input = document.getElementById("searchInputSandBox").value.toLowerCase();
    // Filtrar productos por PLUS o nombre
    const filteredData = dataSandBox.filter((row) => {
        const plus = row[0].toLowerCase();
        const producto = row[1].toLowerCase();
        return plus.includes(input) || producto.includes(input);
    });

    //Filtrar que no Estén presentes en Pedidos
    const NoOrderFilteredData = filteredData.filter((row) => {
        // row[0] es el campo que representa el identificador del producto
        return !selectedProductsSandBox.some(
            selectedProduct => selectedProduct[0].toLowerCase() === row[0].toLowerCase());
    });

    displayProductsSandBox(NoOrderFilteredData);
}

/* Fin SandBox */